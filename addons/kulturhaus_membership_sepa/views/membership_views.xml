<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Inherit and customize the standard Members list view -->
    <record id="view_members_list_inherit" model="ir.ui.view">
        <field name="name">membership.members.list.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="membership.membership_members_tree"/>
        <field name="priority">16</field>
        <field name="arch" type="xml">
            <!-- Replace the entire list to add German labels and optional columns -->
            <xpath expr="//list" position="replace">
                <list string="Mitgliederliste">
                    <!-- Core fields -->
                    <field name="display_name" string="Name"/>
                    <field name="associate_member" string="Verknüpftes Mitglied" optional="hide"/>
                    <field name="membership_state" string="Status" 
                           widget="badge" 
                           decoration-success="membership_state == 'paid'" 
                           decoration-warning="membership_state == 'invoiced'" 
                           decoration-danger="membership_state in ['canceled', 'old']"
                           decoration-info="membership_state == 'free'"/>
                    <field name="membership_start" string="Mitglied seit"/>
                    <field name="membership_stop" string="Mitglied bis"/>
                    <field name="membership_cancel" string="Kündigung" optional="hide"/>
                    
                    <!-- Contact fields -->
                    <field name="email" string="E-Mail" optional="show"/>
                    <field name="phone" string="Telefon" optional="hide"/>
                    <field name="mobile" string="Mobil" optional="show"/>
                    
                    <!-- Address fields -->
                    <field name="street" string="Adresse" optional="show"/>
                    <field name="street2" string="Adresszusatz" optional="hide"/>
                    <field name="zip" string="PLZ" optional="hide"/>
                    <field name="city" string="Stadt" optional="hide"/>
                    <field name="state_id" string="Bundesland" optional="hide"/>
                    <field name="country_id" string="Land" optional="hide"/>
                    
                    <!-- SEPA fields -->
                    <field name="bank_account_iban" string="IBAN" optional="hide"/>
                    <field name="bank_account_bic" string="BIC" optional="hide"/>
                    <field name="sepa_mandate_id" string="Mandat-ID" optional="hide"/>
                    <field name="sepa_mandate_state" string="SEPA-Status" optional="hide"/>
                    <field name="sepa_last_debit_date" string="Letzte Lastschrift" optional="hide"/>
                    
                    <!-- Additional fields -->
                    <field name="free_member" string="Freimitglied" optional="hide"/>
                    <field name="membership_amount" string="Beitragshöhe" optional="hide"/>
                    <field name="vat" string="USt-IdNr." optional="hide"/>
                    <field name="website" string="Webseite" optional="hide"/>
                    <field name="comment" string="Notizen" optional="hide"/>
                    <field name="function" string="Funktion" optional="hide"/>
                    <field name="lang" string="Sprache" optional="hide"/>
                    <field name="ref" string="Referenz" optional="hide"/>
                    <field name="user_id" string="Verkäufer" optional="hide"/>
                    <field name="company_id" string="Unternehmen" optional="hide" groups="base.group_multi_company"/>
                    <field name="create_date" string="Erstellt am" optional="hide"/>
                </list>
            </xpath>
        </field>
    </record>

    <!-- Enhance the Members search view with German labels -->
    <record id="view_members_search_inherit" model="ir.ui.view">
        <field name="name">membership.members.search.inherit</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="membership.view_res_partner_member_filter"/>
        <field name="arch" type="xml">
            <!-- Add SEPA filters after existing filters -->
            <xpath expr="//filter[@name='all_members']" position="after">
                <separator/>
                <filter string="Gültiges SEPA-Mandat" name="sepa_valid" 
                        domain="[('sepa_mandate_state', '=', 'valid')]"/>
                <filter string="Kein SEPA-Mandat" name="no_sepa" 
                        domain="[('sepa_mandate_state', '!=', 'valid')]"/>
            </xpath>
            
            <!-- Add SEPA grouping option -->
            <xpath expr="//group" position="inside">
                <filter name="group_by_sepa" string="SEPA-Status" 
                        context="{'group_by': 'sepa_mandate_state'}"/>
            </xpath>
        </field>
    </record>
</odoo>